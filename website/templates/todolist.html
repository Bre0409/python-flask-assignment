{% extends "base.html" %}

{% block title %}To Do List{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/todolist.css') }}">

<h1 id="main-title" class="main-title">Daily Organizer</h1>

<p class="description">
  Here you can <strong>Add</strong> a Task, <strong>Edit</strong> a Task, <br>
  <strong>Delete</strong> a Task or mark a Task as <strong>Completed</strong>.
</p>

<!-- ✅ ADD TASK FORM: Above all pages -->
<form method="POST" action="{{ url_for('views.task_list') }}" class="add-task-form">
  <input id="task" type="text" name="task" placeholder="Enter Task" required>
  <button type="submit" class="add-task-btn">Add</button>
</form>

<div class="todo-wrapper">
  <button id="leftBtn" class="nav-arrow"><i class="fa fa-chevron-left"></i></button>

  <div id="pageOuter">
    <div id="pageContainer">

      <!-- ✅ TODAY PAGE -->
      <div class="page">
        <h3>Today</h3>

        <div id="todo-0">
          {% for task in tasks %}
            <div class="task" {% if task.completed %}data-completed="true"{% endif %}>

              <!-- Task Text -->
              <span class="task-text" id="text-{{ task.id }}">{{ task.text }}</span>

              <!-- 🔁 Edit Form (Initially Hidden) -->
              <form method="POST" action="{{ url_for('views.edit_task', task_id=task.id) }}"
                    class="edit-form" id="form-{{ task.id }}" style="display: none;">
                <input type="text" name="edited_text" value="{{ task.text }}" required>
                <button type="submit">Save</button>
                <button type="button" onclick="toggleEdit({{ task.id }})">Cancel</button>
              </form>

              <!-- ✅ Complete Button -->
              <form method="POST" action="{{ url_for('views.complete_task', task_id=task.id) }}" style="display:inline;">
                <button type="submit" class="complete-btn">
                  {% if task.completed %}Undo{% else %}✔{% endif %}
                </button>
              </form>

              <!-- 🗑 Delete Button -->
              <form method="POST" action="{{ url_for('views.delete_task', task_id=task.id) }}" style="display:inline;">
                <button type="submit" class="delete-btn">🗑</button>
              </form>

              <!-- ✏️ Edit Toggle -->
              <button type="button" class="edit-btn" onclick="toggleEdit({{ task.id }})">✏️</button>
            </div>
          {% endfor %}
        </div>
      </div>

      <!-- ⏳ Other Pages -->
      <div class="page"><h3>Tomorrow</h3><div id="todo-1"></div></div>
      <div class="page"><h3>Wednesday</h3><div id="todo-2"></div></div>
      <div class="page"><h3>Thursday</h3><div id="todo-3"></div></div>
      <div class="page"><h3>Friday</h3><div id="todo-4"></div></div>
      <div class="page"><h3>Saturday</h3><div id="todo-5"></div></div>
      <div class="page"><h3>Sunday</h3><div id="todo-6"></div></div>

    </div> <!-- end of #pageContainer -->
  </div> <!-- end of #pageOuter -->

  <button id="rightBtn" class="nav-arrow"><i class="fa fa-chevron-right"></i></button>
</div>

<script src="{{ url_for('static', filename='js/todolist.js') }}"></script>


{% endblock %}
